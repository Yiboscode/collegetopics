/* empty css                *//* empty css                  *//* empty css               *//* empty css              *//* empty css               *//* empty css                 */import{r as p}from"./request-CfAbx4ue.js";import{r as x,c as i,b as a,w as o,K as U,h as y,o as d,a as k,L as I,M as N,u as S,m as w,k as B,z as C,A,j as F,E as n}from"./index-BlySnbrc.js";const J={style:{width:"50%"},class:"card"},M=["src"],O={style:{"text-align":"center"}},R={__name:"Person",emits:["updateUser"],setup(P,{emit:c}){const _="/api",e=x({user:JSON.parse(localStorage.getItem("xm-user")||"{}")}),f=t=>{e.user.avatar=t.data},m=c,V=()=>{e.user.role==="ADMIN"?p.put("/admin/update",e.user).then(t=>{t.code==="200"?(n.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),m("updateUser")):n.error(t.msg)}):e.user.role==="TEACHER"&&p.put("/teacher/update",e.user).then(t=>{t.code==="200"?(n.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),m("updateUser")):n.error(t.msg)})};return(t,l)=>{const g=y("Plus"),v=B,E=N,r=I,u=C,b=A,h=U;return d(),i("div",J,[a(h,{ref:"user",model:e.user,"label-width":"70px",style:{padding:"20px"}},{default:o(()=>[a(r,{prop:"avatar",label:"头像"},{default:o(()=>[a(E,{action:S(_)+"/files/upload","on-success":f,"show-file-list":!1,class:"avatar-uploader"},{default:o(()=>[e.user.avatar?(d(),i("img",{key:0,src:e.user.avatar,class:"avatar"},null,8,M)):(d(),w(v,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[a(g)]),_:1}))]),_:1},8,["action"])]),_:1}),a(r,{prop:"username",label:"用户名"},{default:o(()=>[a(u,{disabled:"",modelValue:e.user.username,"onUpdate:modelValue":l[0]||(l[0]=s=>e.user.username=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),a(r,{prop:"name",label:"姓名"},{default:o(()=>[a(u,{modelValue:e.user.name,"onUpdate:modelValue":l[1]||(l[1]=s=>e.user.name=s),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(r,{prop:"phone",label:"电话"},{default:o(()=>[a(u,{modelValue:e.user.phone,"onUpdate:modelValue":l[2]||(l[2]=s=>e.user.phone=s),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),a(r,{prop:"email",label:"邮箱"},{default:o(()=>[a(u,{modelValue:e.user.email,"onUpdate:modelValue":l[3]||(l[3]=s=>e.user.email=s),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),k("div",O,[a(b,{type:"primary",onClick:V},{default:o(()=>l[4]||(l[4]=[F("保 存")])),_:1})])]),_:1},8,["model"])])}}};export{R as default};
