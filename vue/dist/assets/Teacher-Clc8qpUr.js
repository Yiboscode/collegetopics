/* empty css                *//* empty css               *//* empty css                *//* empty css                  *//* empty css               *//* empty css                 *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as c}from"./request-CfAbx4ue.js";/* empty css                    */import{r as P,c as b,a as f,n as V,b as l,z as $,w as r,A,B as O,C as j,D as q,o as g,j as m,G,m as H,H as K,u as _,I as L,J as Q,K as R,L as W,M as X,N as y,E as d}from"./index-BlySnbrc.js";const Y={class:"card",style:{"margin-bottom":"5px"}},Z={class:"card",style:{"margin-bottom":"5px"}},ee={class:"card",style:{"margin-bottom":"5px"}},te={key:0,class:"card"},le={class:"dialog-footer"},we={__name:"Teacher",setup(oe){const h="/api",t=P({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:10,total:0,name:null,ids:[]}),s=()=>{c.get("/teacher/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,name:t.name}}).then(a=>{var e,n;a.code==="200"&&(t.tableData=((e=a.data)==null?void 0:e.list)||[],t.total=(n=a.data)==null?void 0:n.total)})},v=()=>{t.form={},t.formVisible=!0},w=a=>{t.form=JSON.parse(JSON.stringify(a)),t.formVisible=!0},x=()=>{c.post("/teacher/add",t.form).then(a=>{a.code==="200"?(d.success("操作成功"),t.formVisible=!1,s()):d.error(a.msg)})},C=()=>{c.put("/teacher/update",t.form).then(a=>{a.code==="200"&&(d.success("操作成功"),t.formVisible=!1,s())})},k=()=>{t.form.id?C():x()},E=a=>{y.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(e=>{c.delete("/teacher/delete/"+a).then(n=>{n.code==="200"?(d.success("删除成功"),s()):d.error(n.msg)})}).catch(e=>{console.error(e)})},N=()=>{if(!t.ids.length){d.warning("请选择数据");return}y.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(a=>{c.delete("/teacher/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(d.success("操作成功"),s()):d.error(e.msg)})}).catch(a=>{console.error(a)})},U=a=>{t.ids=a.map(e=>e.id)},S=a=>{t.form.avatar=a.data},B=()=>{t.name=null,s()};return s(),(a,e)=>{const n=$,i=A,p=G,z=K,D=O,I=j,u=W,T=X,F=R,J=q;return g(),b("div",null,[f("div",Y,[l(n,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),l(i,{type:"info",plain:"",onClick:s},{default:r(()=>e[8]||(e[8]=[m("查询")])),_:1}),l(i,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:B},{default:r(()=>e[9]||(e[9]=[m("重置")])),_:1})]),f("div",Z,[l(i,{type:"primary",plain:"",onClick:v},{default:r(()=>e[10]||(e[10]=[m("新增")])),_:1}),l(i,{type:"danger",plain:"",onClick:N},{default:r(()=>e[11]||(e[11]=[m("批量删除")])),_:1})]),f("div",ee,[l(D,{stripe:"",data:t.tableData,onSelectionChange:U},{default:r(()=>[l(p,{type:"selection",width:"55"}),l(p,{prop:"username",label:"账号"}),l(p,{prop:"avatar",label:"头像"},{default:r(o=>[o.row.avatar?(g(),H(z,{key:0,style:{width:"40px",height:"40px","border-radius":"50%",display:"block"},src:o.row.avatar,"preview-src-list":[o.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):V("",!0)]),_:1}),l(p,{prop:"name",label:"姓名"}),l(p,{prop:"role",label:"角色"}),l(p,{prop:"phone",label:"电话"}),l(p,{prop:"email",label:"邮箱"}),l(p,{label:"操作",width:"100",fixed:"right"},{default:r(o=>[l(i,{type:"primary",circle:"",icon:_(L),onClick:M=>w(o.row)},null,8,["icon","onClick"]),l(i,{type:"danger",circle:"",icon:_(Q),onClick:M=>E(o.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(g(),b("div",te,[l(I,{onCurrentChange:s,background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=o=>t.pageNum=o),total:t.total},null,8,["page-size","current-page","total"])])):V("",!0),l(J,{title:"教师信息",modelValue:t.formVisible,"onUpdate:modelValue":e[7]||(e[7]=o=>t.formVisible=o),width:"40%","destroy-on-close":""},{footer:r(()=>[f("span",le,[l(i,{onClick:e[6]||(e[6]=o=>t.formVisible=!1)},{default:r(()=>e[13]||(e[13]=[m("取 消")])),_:1}),l(i,{type:"primary",onClick:k},{default:r(()=>e[14]||(e[14]=[m("确 定")])),_:1})])]),default:r(()=>[l(F,{ref:"form",model:t.form,"label-width":"70px",style:{padding:"20px"}},{default:r(()=>[l(u,{prop:"username",label:"用户名"},{default:r(()=>[l(n,{modelValue:t.form.username,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.username=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(u,{prop:"avatar",label:"头像"},{default:r(()=>[l(T,{action:_(h)+"/files/upload","on-success":S,"list-type":"picture"},{default:r(()=>[l(i,{type:"primary"},{default:r(()=>e[12]||(e[12]=[m("点击上传")])),_:1})]),_:1},8,["action"])]),_:1}),l(u,{prop:"name",label:"姓名"},{default:r(()=>[l(n,{modelValue:t.form.name,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.name=o),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(u,{prop:"phone",label:"电话"},{default:r(()=>[l(n,{modelValue:t.form.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>t.form.phone=o),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),l(u,{prop:"email",label:"邮箱"},{default:r(()=>[l(n,{modelValue:t.form.email,"onUpdate:modelValue":e[5]||(e[5]=o=>t.form.email=o),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{we as default};
