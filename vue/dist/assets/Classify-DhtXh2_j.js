/* empty css                *//* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css               *//* empty css              */import{r as p}from"./request-CfAbx4ue.js";/* empty css                    */import{O,r as U,c as g,a as u,n as P,b as l,z as T,w as a,A as $,B as q,C as A,D as F,o as _,j as d,G as M,u as y,I as R,J as j,K as G,L as K,N as b,E as s}from"./index-BlySnbrc.js";const L={class:"card",style:{"margin-bottom":"5px"}},H={class:"card",style:{"margin-bottom":"5px"}},Q={class:"card",style:{"margin-bottom":"5px"}},W={key:0,class:"card"},X={class:"dialog-footer"},fe={__name:"Classify",setup(Y){const f=O(),e=U({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),tableData:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{},ids:[],name:null,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),r=()=>{p.get("/classify/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(o=>{var t,i;e.tableData=((t=o.data)==null?void 0:t.list)||[],e.total=(i=o.data)==null?void 0:i.total})},V=()=>{e.form={},e.formVisible=!0},C=o=>{e.form=JSON.parse(JSON.stringify(o)),e.formVisible=!0},x=()=>{p.post("/classify/add",e.form).then(o=>{o.code==="200"?(e.formVisible=!1,s.success("操作成功"),r()):s.error(o.msg)})},k=()=>{p.put("/classify/update",e.form).then(o=>{o.code==="200"?(e.formVisible=!1,s.success("操作成功"),r()):s.error(o.msg)})},v=o=>{b.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(t=>{p.delete("/classify/delete/"+o).then(i=>{i.code==="200"?(s.success("删除成功"),r()):s.error(i.msg)})}).catch(t=>{console.error(t)})},w=o=>{e.ids=o.map(t=>t.id)},E=()=>{if(!e.ids.length){s.warning("请选择数据");return}b.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(o=>{p.delete("/classify/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(s.success("操作成功"),r()):s.error(t.msg)})}).catch(o=>console.log(o))},N=()=>{f.value.validate(o=>{o&&(e.form.id?k():x())})},h=()=>{e.name=null,r()};return r(),(o,t)=>{const i=T,m=$,c=M,S=q,z=A,B=K,D=G,I=F;return _(),g("div",null,[u("div",L,[l(i,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.name=n),placeholder:"请输入分类名称查询",style:{width:"240px"}},null,8,["modelValue"]),l(m,{type:"info",plain:"",style:{"margin-left":"10px"},onClick:r},{default:a(()=>t[5]||(t[5]=[d("查询")])),_:1}),l(m,{type:"warning",plain:"",style:{"margin-left":"10px"},onClick:h},{default:a(()=>t[6]||(t[6]=[d("重置")])),_:1})]),u("div",H,[l(m,{type:"primary",plain:"",onClick:V},{default:a(()=>t[7]||(t[7]=[d("新增")])),_:1}),l(m,{type:"danger",plain:"",onClick:E},{default:a(()=>t[8]||(t[8]=[d("批量删除")])),_:1})]),u("div",Q,[l(S,{data:e.tableData,stripe:"",onSelectionChange:w},{default:a(()=>[l(c,{type:"selection",width:"55"}),l(c,{prop:"name",label:"分类名称"}),l(c,{label:"操作",width:"100",fixed:"right"},{default:a(n=>[l(m,{type:"primary",circle:"",icon:y(R),onClick:J=>C(n.row)},null,8,["icon","onClick"]),l(m,{type:"danger",circle:"",icon:y(j),onClick:J=>v(n.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(_(),g("div",W,[l(z,{onCurrentChange:r,background:"",layout:"total, prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=n=>e.pageNum=n),total:e.total},null,8,["page-size","current-page","total"])])):P("",!0),l(I,{title:"分类信息",modelValue:e.formVisible,"onUpdate:modelValue":t[4]||(t[4]=n=>e.formVisible=n),width:"40%","close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[u("span",X,[l(m,{onClick:t[3]||(t[3]=n=>e.formVisible=!1)},{default:a(()=>t[9]||(t[9]=[d("取消")])),_:1}),l(m,{type:"primary",onClick:N},{default:a(()=>t[10]||(t[10]=[d("保存")])),_:1})])]),default:a(()=>[l(D,{model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px 30px"},ref_key:"formRef",ref:f},{default:a(()=>[l(B,{label:"名称",prop:"name"},{default:a(()=>[l(i,{modelValue:e.form.name,"onUpdate:modelValue":t[2]||(t[2]=n=>e.form.name=n),placeholder:"名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{fe as default};
