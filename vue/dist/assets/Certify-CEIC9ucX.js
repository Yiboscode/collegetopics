/* empty css                *//* empty css               *//* empty css                *//* empty css                  *//* empty css                     *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as g}from"./request-CfAbx4ue.js";/* empty css                    */import{O as P,r as A,c as V,a as b,n as f,b as r,z as L,w as a,A as $,B as F,C as G,D as M,E as i,o as p,j as n,G as j,m as c,H,P as K,u as Q,J as W,K as X,L as Y,Q as Z,R as ee,N as h}from"./index-BlySnbrc.js";const te={class:"card",style:{"margin-bottom":"5px"}},re={class:"card",style:{"margin-bottom":"5px"}},oe={class:"card",style:{"margin-bottom":"5px"}},le={key:0,class:"card"},ae={class:"dialog-footer"},ve={__name:"Certify",setup(se){const y=P(),t=A({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),tableData:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{},ids:[],teacherName:null,rules:{teacherId:[{required:!0,message:"请输入教师ID%name%name|教师名称",trigger:"blur"}],name:[{required:!0,message:"请输入认证人姓名",trigger:"blur"}],gender:[{required:!0,message:"请输入认证人性别",trigger:"blur"}],cardNo:[{required:!0,message:"请输入身份证号",trigger:"blur"}],img1:[{required:!0,message:"请输入身份证照片",trigger:"blur"}],img2:[{required:!0,message:"请输入资格证照片",trigger:"blur"}],time:[{required:!0,message:"请输入时间",trigger:"blur"}],status:[{required:!0,message:"请输入审核状态",trigger:"blur"}],reason:[{required:!0,message:"请输入原因",trigger:"blur"}]},teacherList:[]});(()=>{g.get("/teacher/selectAll").then(l=>{l.code==="200"?t.teacherList=l.data:i.error(l.msg)})})();const d=()=>{g.get("/certify/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,teacherName:t.teacherName}}).then(l=>{var e,m;t.tableData=((e=l.data)==null?void 0:e.list)||[],t.total=(m=l.data)==null?void 0:m.total})},N=()=>{t.form={},t.formVisible=!0},v=l=>{t.form=JSON.parse(JSON.stringify(l)),t.formVisible=!0},C=()=>{g.post("/certify/add",t.form).then(l=>{l.code==="200"?(t.formVisible=!1,i.success("操作成功"),d()):i.error(l.msg)})},E=()=>{g.put("/certify/update",t.form).then(l=>{l.code==="200"?(t.formVisible=!1,i.success("操作成功"),d()):i.error(l.msg)})},q=l=>{h.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(e=>{g.delete("/certify/delete/"+l).then(m=>{m.code==="200"?(i.success("删除成功"),d()):i.error(m.msg)})}).catch(e=>{console.error(e)})},S=l=>{t.ids=l.map(e=>e.id)},B=()=>{if(!t.ids.length){i.warning("请选择数据");return}h.confirm("删除后数据无法恢复，您确定删除吗?","删除确认",{type:"warning"}).then(l=>{g.delete("/certify/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(i.success("操作成功"),d()):i.error(e.msg)})}).catch(l=>console.log(l))},z=()=>{y.value.validate(l=>{l&&(t.form.id?E():C())})},D=()=>{t.teacherName=null,d()};return d(),(l,e)=>{const m=L,u=$,s=j,w=H,_=K,I=F,T=G,k=ee,R=Z,x=Y,U=X,J=M;return p(),V("div",null,[b("div",te,[r(m,{modelValue:t.teacherName,"onUpdate:modelValue":e[0]||(e[0]=o=>t.teacherName=o),placeholder:"请输入用户查询",style:{width:"240px"}},null,8,["modelValue"]),r(u,{type:"info",plain:"",style:{"margin-left":"10px"},onClick:d},{default:a(()=>e[6]||(e[6]=[n("查询")])),_:1}),r(u,{type:"warning",plain:"",style:{"margin-left":"10px"},onClick:D},{default:a(()=>e[7]||(e[7]=[n("重置")])),_:1})]),b("div",re,[r(u,{type:"primary",plain:"",onClick:N},{default:a(()=>e[8]||(e[8]=[n("新增")])),_:1}),r(u,{type:"danger",plain:"",onClick:B},{default:a(()=>e[9]||(e[9]=[n("批量删除")])),_:1})]),b("div",oe,[r(I,{data:t.tableData,stripe:"",onSelectionChange:S,"tooltip-effect":"dark dark1"},{default:a(()=>[r(s,{type:"selection",width:"55"}),r(s,{prop:"teacherName",label:"用户"}),r(s,{prop:"name",label:"教师姓名"}),r(s,{prop:"gender",label:"教师性别"}),r(s,{prop:"cardNo",label:"身份证号","show-overflow-tooltip":""}),r(s,{label:"身份证照片"},{default:a(o=>[o.row.img1?(p(),c(w,{key:0,style:{width:"40px",height:"40px","border-radius":"5px"},src:o.row.img1,"preview-src-list":[o.row.img1],"preview-teleported":""},null,8,["src","preview-src-list"])):f("",!0)]),_:1}),r(s,{label:"资格证照片"},{default:a(o=>[o.row.img2?(p(),c(w,{key:0,style:{width:"40px",height:"40px","border-radius":"5px"},src:o.row.img2,"preview-src-list":[o.row.img2],"preview-teleported":""},null,8,["src","preview-src-list"])):f("",!0)]),_:1}),r(s,{prop:"time",label:"时间","show-overflow-tooltip":""}),r(s,{prop:"status",label:"审核状态"},{default:a(o=>[o.row.status==="待审核"?(p(),c(_,{key:0,type:"warning"},{default:a(()=>e[10]||(e[10]=[n("待审核")])),_:1})):f("",!0),o.row.status==="审核通过"?(p(),c(_,{key:1,type:"success"},{default:a(()=>e[11]||(e[11]=[n("审核通过")])),_:1})):f("",!0),o.row.status==="审核未通过"?(p(),c(_,{key:2,type:"danger"},{default:a(()=>e[12]||(e[12]=[n("审核未通过")])),_:1})):f("",!0)]),_:1}),r(s,{prop:"reason",label:"原因"}),r(s,{label:"操作",width:"120",fixed:"right"},{default:a(o=>[r(u,{type:"primary",size:"small",onClick:O=>v(o.row),disabled:o.row.status==="审核通过"},{default:a(()=>e[13]||(e[13]=[n("审核")])),_:2},1032,["onClick","disabled"]),r(u,{type:"danger",circle:"",icon:Q(W),onClick:O=>q(o.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(p(),V("div",le,[r(T,{onCurrentChange:d,background:"",layout:"total, prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=o=>t.pageNum=o),total:t.total},null,8,["page-size","current-page","total"])])):f("",!0),r(J,{title:"审核",modelValue:t.formVisible,"onUpdate:modelValue":e[5]||(e[5]=o=>t.formVisible=o),width:"40%","close-on-click-modal":!1,"destroy-on-close":""},{footer:a(()=>[b("span",ae,[r(u,{onClick:e[4]||(e[4]=o=>t.formVisible=!1)},{default:a(()=>e[14]||(e[14]=[n("取消")])),_:1}),r(u,{type:"primary",onClick:z},{default:a(()=>e[15]||(e[15]=[n("保存")])),_:1})])]),default:a(()=>[r(U,{model:t.form,"label-width":"100px",style:{padding:"20px 30px"},ref_key:"formRef",ref:y},{default:a(()=>[r(x,{label:"审核状态",prop:"status"},{default:a(()=>[r(R,{modelValue:t.form.status,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.status=o)},{default:a(()=>[r(k,{label:"审核通过"}),r(k,{label:"审核未通过"})]),_:1},8,["modelValue"])]),_:1}),r(x,{label:"处理意见",prop:"reason"},{default:a(()=>[r(m,{type:"textarea",rows:3,modelValue:t.form.reason,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.reason=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ve as default};
