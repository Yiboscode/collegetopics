/* empty css                *//* empty css                  *//* empty css               *//* empty css              */import{r as _}from"./request-CfAbx4ue.js";import{O as g,r as P,c as V,a as n,b as o,w as a,K as x,o as b,L as v,z as E,A as y,j as h,E as m,f as B}from"./index-BlySnbrc.js";const I={style:{width:"40%"},class:"main-content"},N={class:"card"},q={style:{"text-align":"center"}},R={__name:"Password",setup(S){const u=g(),p=(l,e,r)=>{e?(e!==s.user.newPassword&&r(new Error("确认密码跟原密码不一致!")),r()):r(new Error("请确认密码"))},s=P({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPassword:[{validator:p,trigger:"blur"}]}}),i=()=>{u.value.validate(l=>{l&&_.put("/updatePassword",s.user).then(e=>{e.code==="200"?(m.success("保存成功"),w()):m.error(e.msg)})})},w=()=>{localStorage.removeItem("xm-user"),B.push("/login")};return(l,e)=>{const r=E,d=v,f=y,c=x;return b(),V("div",I,[e[4]||(e[4]=n("div",{style:{"font-weight":"bold","font-size":"24px","margin-bottom":"20px"}},"修改密码",-1)),n("div",N,[o(c,{ref_key:"formRef",ref:u,rules:s.rules,model:s.user,"label-width":"80px",style:{padding:"20px"}},{default:a(()=>[o(d,{label:"原密码",prop:"password"},{default:a(()=>[o(r,{modelValue:s.user.password,"onUpdate:modelValue":e[0]||(e[0]=t=>s.user.password=t),placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{label:"新密码",prop:"newPassword"},{default:a(()=>[o(r,{modelValue:s.user.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>s.user.newPassword=t),placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[o(r,{modelValue:s.user.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>s.user.confirmPassword=t),placeholder:"请确认新密码","show-password":""},null,8,["modelValue"])]),_:1}),n("div",q,[o(f,{type:"primary",onClick:i},{default:a(()=>e[3]||(e[3]=[h("保 存")])),_:1})])]),_:1},8,["rules","model"])])])}}};export{R as default};
