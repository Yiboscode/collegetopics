/* empty css                *//* empty css                  *//* empty css               *//* empty css                 *//* empty css              *//* empty css               *//* empty css                *//* empty css            *//* empty css               */import{r as _}from"./request-CfAbx4ue.js";import{r as B,O as D,c,a as l,b as a,w as s,a3 as F,D as L,o as p,F as N,x as z,m as I,a4 as $,t as r,j as n,A as q,K as R,L as S,z as j,M as A,u as M,E as g}from"./index-BlySnbrc.js";const O={class:"main-content"},J={class:"card",style:{"margin-bottom":"20px",padding:"20px"}},K={style:{"font-size":"20px","font-weight":"bold",cursor:"pointer"},class:"line1"},G={style:{"margin-top":"10px","line-height":"20px",height:"60px",color:"#666"},class:"line3"},H=["onClick"],P={style:{"margin-top":"10px",color:"#666","font-size":"13px"}},Q={style:{"margin-left":"5px"}},W={style:{"margin-left":"5px"}},X={class:"line1",style:{"margin-bottom":"10px"}},Y={style:{"margin-left":"5px"}},Z={style:{"text-align":"center"}},ee={style:{padding:"20px"}},te={class:"dialog-footer"},ce={__name:"Task",setup(oe){const t=B({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),taskList:[],dialogVisible:!1,detailContent:"",form:{},formVisible:!1,rules:{title:[{required:!0,message:"请输入标题内容",trigger:"blur"}],detail:[{required:!0,message:"请上传完成成果",trigger:"change"}]}}),m=D(),x="/api",y=i=>{t.form.detail=i.data};(()=>{_.get("/task/selectUserTask").then(i=>{t.taskList=i.data||[]})})();const V=i=>{t.detailContent=i,t.dialogVisible=!0},b=(i,e)=>{t.form={taskId:i,teacherId:e},t.formVisible=!0},k=()=>{m.value.validate(i=>{i&&v()})},v=()=>{_.post("/submit/add",t.form).then(i=>{i.code==="200"?(g.success("操作成功"),t.formVisible=!1):g.error(i.msg)})};return(i,e)=>{const d=q,C=$,E=F,u=L,w=j,f=S,U=A,T=R;return p(),c("div",O,[l("div",null,[l("div",null,[a(E,{gutter:20},{default:s(()=>[(p(!0),c(N,null,z(t.taskList,o=>(p(),I(C,{span:8,key:o.id},{default:s(()=>[l("div",J,[l("div",K,r(o.title),1),l("div",G,r(o.detail),1),l("div",{style:{"font-size":"12px",color:"#0066ff",cursor:"pointer"},onClick:h=>V(o.detail)},"查看详情",8,H),l("div",P,[l("div",null,[e[5]||(e[5]=n("指导老师：")),l("span",Q,r(o.teacherName),1)]),l("div",null,[e[6]||(e[6]=n("发布时间：")),l("span",W,r(o.time),1)]),l("div",X,[e[7]||(e[7]=n("项目名称：")),l("span",Y,r(o.projectTitle),1)]),l("div",Z,[a(d,{type:"primary",onClick:h=>b(o.id,o.teacherId)},{default:s(()=>e[8]||(e[8]=[n("成果提交")])),_:2},1032,["onClick"])])])])]),_:2},1024))),128))]),_:1})]),a(u,{title:"任务详情",modelValue:t.dialogVisible,"onUpdate:modelValue":e[1]||(e[1]=o=>t.dialogVisible=o),width:"50%","close-on-click-modal":!1},{footer:s(()=>[a(d,{onClick:e[0]||(e[0]=o=>t.dialogVisible=!1)},{default:s(()=>e[9]||(e[9]=[n("关闭")])),_:1})]),default:s(()=>[l("div",ee,r(t.detailContent),1)]),_:1},8,["modelValue"]),a(u,{title:"成果信息",modelValue:t.formVisible,"onUpdate:modelValue":e[4]||(e[4]=o=>t.formVisible=o),width:"50%","destroy-on-close":""},{footer:s(()=>[l("span",te,[a(d,{onClick:e[3]||(e[3]=o=>t.formVisible=!1)},{default:s(()=>e[11]||(e[11]=[n("取 消")])),_:1}),a(d,{type:"primary",onClick:k},{default:s(()=>e[12]||(e[12]=[n("确 定")])),_:1})])]),default:s(()=>[a(T,{"el-form":"",ref_key:"formRef",ref:m,model:t.form,rules:t.rules,"label-width":"80px",style:{padding:"20px"}},{default:s(()=>[a(f,{prop:"title",label:"成果描述"},{default:s(()=>[a(w,{type:"textarea",rows:4,modelValue:t.form.title,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.title=o),placeholder:"成果描述"},null,8,["modelValue"])]),_:1}),a(f,{prop:"detail",label:"成果附件"},{default:s(()=>[a(U,{action:M(x)+"/files/upload","on-success":y,"list-type":"text"},{default:s(()=>[a(d,{type:"primary"},{default:s(()=>e[10]||(e[10]=[n("点击上传")])),_:1})]),_:1},8,["action"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])])}}};export{ce as default};
