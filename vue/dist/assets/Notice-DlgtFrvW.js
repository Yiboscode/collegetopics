/* empty css                *//* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                *//* empty css               *//* empty css              */import{r as u}from"./request-CfAbx4ue.js";/* empty css                    */import{r as I,O as J,c as g,a as c,n as O,b as o,z as P,w as n,A as T,B as $,C as A,D as F,o as _,j as p,G as M,u as b,I as j,J as G,K,L,N as y,E as i}from"./index-BlySnbrc.js";const R={class:"card",style:{"margin-bottom":"5px"}},H={class:"card",style:{"margin-bottom":"5px"}},Q={class:"card",style:{"margin-bottom":"5px"}},W={key:0,class:"card"},X={class:"dialog-footer"},fe={__name:"Notice",setup(Y){const e=I({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:10,total:0,title:null,ids:[],rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]}}),V=J(),s=()=>{u.get("/notice/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,title:e.title}}).then(l=>{var t,r;l.code==="200"&&(e.tableData=((t=l.data)==null?void 0:t.list)||[],e.total=(r=l.data)==null?void 0:r.total)})},C=()=>{e.form={},e.formVisible=!0},x=l=>{e.form=JSON.parse(JSON.stringify(l)),e.formVisible=!0},k=()=>{u.post("/notice/add",e.form).then(l=>{l.code==="200"?(i.success("操作成功"),e.formVisible=!1,s()):i.error(l.msg)})},w=()=>{u.put("/notice/update",e.form).then(l=>{l.code==="200"?(i.success("操作成功"),e.formVisible=!1,s()):i.error(l.msg)})},v=()=>{V.value.validate(l=>{l&&(e.form.id?w():k())})},h=l=>{y.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(t=>{u.delete("/notice/delete/"+l).then(r=>{r.code==="200"?(i.success("删除成功"),s()):i.error(r.msg)})}).catch(t=>{console.error(t)})},E=()=>{if(!e.ids.length){i.warning("请选择数据");return}y.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(l=>{u.delete("/notice/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(i.success("操作成功"),s()):i.error(t.msg)})}).catch(l=>{console.error(l)})},N=l=>{e.ids=l.map(t=>t.id)},S=()=>{e.title=null,s()};return s(),(l,t)=>{const r=P,d=T,m=M,z=$,B=A,f=L,D=K,U=F;return _(),g("div",null,[c("div",R,[o(r,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.title=a),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入公告标题查询"},null,8,["modelValue"]),o(d,{type:"info",plain:"",onClick:s},{default:n(()=>t[6]||(t[6]=[p("查询")])),_:1}),o(d,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:S},{default:n(()=>t[7]||(t[7]=[p("重置")])),_:1})]),c("div",H,[o(d,{type:"primary",plain:"",onClick:C},{default:n(()=>t[8]||(t[8]=[p("新增")])),_:1}),o(d,{type:"danger",plain:"",onClick:E},{default:n(()=>t[9]||(t[9]=[p("批量删除")])),_:1})]),c("div",Q,[o(z,{stripe:"",data:e.tableData,onSelectionChange:N,"tooltip-effect":"dark dark1"},{default:n(()=>[o(m,{type:"selection",width:"55"}),o(m,{prop:"title",label:"公告标题"}),o(m,{prop:"content",label:"公告内容","show-overflow-tooltip":""}),o(m,{prop:"time",label:"发布时间"}),o(m,{label:"操作",width:"100",fixed:"right"},{default:n(a=>[o(d,{type:"primary",circle:"",icon:b(j),onClick:q=>x(a.row)},null,8,["icon","onClick"]),o(d,{type:"danger",circle:"",icon:b(G),onClick:q=>h(a.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(_(),g("div",W,[o(B,{onCurrentChange:s,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=a=>e.pageNum=a),total:e.total},null,8,["page-size","current-page","total"])])):O("",!0),o(U,{title:"公告信息",modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=a=>e.formVisible=a),width:"40%","destroy-on-close":""},{footer:n(()=>[c("span",X,[o(d,{onClick:t[4]||(t[4]=a=>e.formVisible=!1)},{default:n(()=>t[10]||(t[10]=[p("取 消")])),_:1}),o(d,{type:"primary",onClick:v},{default:n(()=>t[11]||(t[11]=[p("确 定")])),_:1})])]),default:n(()=>[o(D,{ref:"form",model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px"}},{default:n(()=>[o(f,{prop:"title",label:"公告标题"},{default:n(()=>[o(r,{modelValue:e.form.title,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.title=a),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1}),o(f,{prop:"content",label:"公告内容"},{default:n(()=>[o(r,{type:"textarea",rows:4,modelValue:e.form.content,"onUpdate:modelValue":t[3]||(t[3]=a=>e.form.content=a),placeholder:"请输入公告内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{fe as default};
