/* empty css                *//* empty css                  *//* empty css                     *//* empty css               *//* empty css                 *//* empty css               *//* empty css            *//* empty css               *//* empty css                  *//* empty css              */import{_ as B,O as b,r as f,c as y,a as u,b as l,w as r,K as C,a7 as F,o as v,L as I,z as M,S as N,T as S,n as z,M as T,A as $,j as m,H as G,E as n}from"./index-BlySnbrc.js";import{r as L}from"./request-CfAbx4ue.js";const O={class:"card"},P={class:"card-body"},A={key:0,style:{"margin-top":"15px"}},H={style:{"margin-top":"10px"}},J={style:{"text-align":"center"}},K={__name:"TopicSubmit",setup(W){const _=F(),g=b(),c=b(!1),t=f({title:"",category:"",keywords:"",description:"",background:"",objectives:"",methodology:"",expectedResults:"",imageUrl:""}),V=f({title:[{required:!0,message:"请输入选题标题",trigger:"blur"},{min:5,max:100,message:"选题标题长度在 5 到 100 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择选题分类",trigger:"change"}],description:[{required:!0,message:"请输入选题描述",trigger:"blur"},{min:20,message:"选题描述至少 20 个字符",trigger:"blur"}],background:[{required:!0,message:"请输入项目背景",trigger:"blur"},{min:50,message:"项目背景至少 50 个字符",trigger:"blur"}],objectives:[{required:!0,message:"请输入项目目标",trigger:"blur"},{min:30,message:"项目目标至少 30 个字符",trigger:"blur"}],methodology:[{required:!0,message:"请输入研究方法",trigger:"blur"},{min:30,message:"研究方法至少 30 个字符",trigger:"blur"}],expectedResults:[{required:!0,message:"请输入预期成果",trigger:"blur"},{min:30,message:"预期成果至少 30 个字符",trigger:"blur"}]}),x=()=>{g.value.validate(s=>{s&&(c.value=!0,L.post("/topic/add",t).then(e=>{e.code==="200"?(n.success("操作成功"),_.push("/front/topic")):n.error(e.msg)}).finally(()=>{c.value=!1}))})},k=()=>{g.value.resetFields()},U=s=>{const e=s.type.startsWith("image/"),a=s.size/1024/1024<10;return e?a?!0:(n.error("图片大小不能超过 10MB!"),!1):(n.error("只能上传图片文件!"),!1)},w=s=>{s.code==="200"?(t.imageUrl=s.data,n.success("图片上传成功")):n.error("图片上传失败")};return(s,e)=>{const a=M,d=I,i=S,E=N,p=$,q=T,R=G,j=C;return v(),y("div",O,[e[16]||(e[16]=u("div",{class:"card-header"},[u("span",{class:"card-title"},"选题提交")],-1)),u("div",P,[l(j,{model:t,rules:V,ref_key:"formRef",ref:g,"label-width":"120px"},{default:r(()=>[l(d,{label:"选题标题",prop:"title"},{default:r(()=>[l(a,{modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=o=>t.title=o),placeholder:"请输入选题标题"},null,8,["modelValue"])]),_:1}),l(d,{label:"选题分类",prop:"category"},{default:r(()=>[l(E,{modelValue:t.category,"onUpdate:modelValue":e[1]||(e[1]=o=>t.category=o),placeholder:"请选择选题分类",style:{width:"100%"}},{default:r(()=>[l(i,{label:"科技创新",value:"科技创新"}),l(i,{label:"社会实践",value:"社会实践"}),l(i,{label:"文化创意",value:"文化创意"}),l(i,{label:"环境保护",value:"环境保护"}),l(i,{label:"商业模式",value:"商业模式"}),l(i,{label:"公益服务",value:"公益服务"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"选题图片"},{default:r(()=>[l(q,{action:s.$baseUrl+"/files/upload","before-upload":U,"on-success":w,"show-file-list":!1,style:{display:"inline-block"}},{default:r(()=>[l(p,{type:"primary"},{default:r(()=>e[10]||(e[10]=[m("点击上传图片")])),_:1})]),_:1},8,["action"]),e[12]||(e[12]=u("div",{style:{color:"#999","font-size":"12px","margin-top":"5px"}}," 支持 JPG、PNG、GIF 格式，文件大小不超过 10MB ",-1)),t.imageUrl?(v(),y("div",A,[l(R,{src:t.imageUrl,style:{width:"200px",height:"150px","border-radius":"8px",border:"1px solid #dcdfe6"},fit:"cover","preview-src-list":[t.imageUrl]},null,8,["src","preview-src-list"]),u("div",H,[l(p,{type:"danger",size:"small",onClick:e[2]||(e[2]=o=>t.imageUrl="")},{default:r(()=>e[11]||(e[11]=[m("删除图片")])),_:1})])])):z("",!0)]),_:1}),l(d,{label:"关键词",prop:"keywords"},{default:r(()=>[l(a,{modelValue:t.keywords,"onUpdate:modelValue":e[3]||(e[3]=o=>t.keywords=o),placeholder:"请输入关键词，用逗号分隔"},null,8,["modelValue"])]),_:1}),l(d,{label:"选题描述",prop:"description"},{default:r(()=>[l(a,{modelValue:t.description,"onUpdate:modelValue":e[4]||(e[4]=o=>t.description=o),type:"textarea",rows:4,placeholder:"请简要描述您的选题"},null,8,["modelValue"])]),_:1}),l(d,{label:"项目背景",prop:"background"},{default:r(()=>[l(a,{modelValue:t.background,"onUpdate:modelValue":e[5]||(e[5]=o=>t.background=o),type:"textarea",rows:5,placeholder:"请详细描述项目背景和现状"},null,8,["modelValue"])]),_:1}),l(d,{label:"项目目标",prop:"objectives"},{default:r(()=>[l(a,{modelValue:t.objectives,"onUpdate:modelValue":e[6]||(e[6]=o=>t.objectives=o),type:"textarea",rows:5,placeholder:"请描述项目要达到的目标"},null,8,["modelValue"])]),_:1}),l(d,{label:"研究方法",prop:"methodology"},{default:r(()=>[l(a,{modelValue:t.methodology,"onUpdate:modelValue":e[7]||(e[7]=o=>t.methodology=o),type:"textarea",rows:5,placeholder:"请描述研究方法和实施方案"},null,8,["modelValue"])]),_:1}),l(d,{label:"预期成果",prop:"expectedResults"},{default:r(()=>[l(a,{modelValue:t.expectedResults,"onUpdate:modelValue":e[8]||(e[8]=o=>t.expectedResults=o),type:"textarea",rows:5,placeholder:"请描述预期取得的成果"},null,8,["modelValue"])]),_:1}),u("div",J,[l(p,{type:"primary",onClick:x,loading:c.value},{default:r(()=>e[13]||(e[13]=[m("提交选题")])),_:1},8,["loading"]),l(p,{onClick:k},{default:r(()=>e[14]||(e[14]=[m("重置")])),_:1}),l(p,{onClick:e[9]||(e[9]=o=>s.$router.go(-1))},{default:r(()=>e[15]||(e[15]=[m("返回")])),_:1})])]),_:1},8,["model","rules"])])])}}},ae=B(K,[["__scopeId","data-v-33153b6d"]]);export{ae as default};
