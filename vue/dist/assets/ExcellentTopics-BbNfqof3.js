/* empty css                *//* empty css               *//* empty css                *//* empty css             *//* empty css                          *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css              *//* empty css            *//* empty css               *//* empty css              */import{_ as P,ax as F,ay as K,az as j,a8 as q,c as p,a,b as l,w as s,a3 as A,n as _,C as L,D as O,h as D,o as i,a4 as G,z as H,ap as J,k as M,S as Q,F as f,x as y,m as u,T as W,A as X,j as m,t as r,ai as Z,P as $,a5 as ee,a6 as te,ad as se}from"./index-BlySnbrc.js";import{r as C}from"./request-CfAbx4ue.js";const ae={name:"ExcellentTopics",components:{Search:q,Calendar:j,Trophy:K,User:F},data(){return{form:{title:"",category:"",year:null},tableData:[],categories:[],years:[],total:0,pageNum:1,pageSize:8,detailVisible:!1,selectedTopic:null,recommendTopics:[],currentYear:new Date().getFullYear()}},mounted(){this.loadData(),this.loadCategories(),this.loadYears()},methods:{loadData(){C.get("/excellentTopic/selectPage",{params:{...this.form,pageNum:this.pageNum,pageSize:this.pageSize}}).then(t=>{t.code==="200"?(this.tableData=t.data.list||t.data.records||[],this.total=t.data.total||0,console.log("优秀选题数据:",t.data)):this.$message.error(t.msg||"加载数据失败")}).catch(t=>{console.error("加载优秀选题数据失败:",t),this.$message.error("加载数据失败")})},loadCategories(){C.get("/excellentTopic/categories").then(t=>{t.code==="200"&&(this.categories=t.data||[])}).catch(t=>{console.error("加载分类失败:",t)})},loadYears(){C.get("/excellentTopic/years").then(t=>{t.code==="200"&&(this.years=t.data||[])}).catch(t=>{console.error("加载年份失败:",t)})},search(){this.pageNum=1,this.loadData()},handleSizeChange(t){this.pageSize=t,this.loadData()},handleCurrentChange(t){this.pageNum=t,this.loadData()},getCategoryType(t){return{科技创新:"primary",社会公益:"success",文化创意:"warning",商业模式:"danger",环境保护:"info"}[t]||""},viewDetail(t){this.selectedTopic=t,this.detailVisible=!0,this.loadRecommendations(t)},viewRecommend(t){this.selectedTopic=t,this.loadRecommendations(t)},loadRecommendations(t){C.get("/excellentTopic/recommend",{params:{keywords:t.title,category:t.category,limit:3}}).then(o=>{o.code==="200"&&(this.recommendTopics=(o.data||[]).filter(T=>T.id!==t.id))}).catch(o=>{console.error("加载推荐失败:",o)})},handleDetailClose(){this.detailVisible=!1,this.selectedTopic=null,this.recommendTopics=[]},handleImageError(t){t.target.src="/src/assets/imgs/1748334301734-万物有灵 创业项目.png"}}},le={class:"excellent-topics"},oe={class:"header-section"},ne={class:"search-section"},ie={class:"stats-section"},re={class:"stat-card"},ce={class:"stat-number"},de={class:"stat-card"},pe={class:"stat-number"},ue={class:"stat-card"},me={class:"stat-number"},_e={class:"stat-card"},ge={class:"stat-number"},he={class:"content-section"},fe=["onClick"],ye={class:"topic-image"},ve=["src","alt"],be={class:"image-overlay"},Ce={class:"year-badge"},Te={class:"topic-content"},ke={class:"topic-title"},Ee={class:"topic-description"},Ve={class:"topic-footer"},ze={class:"award-info"},De={class:"award-text"},we={key:0,class:"topic-tags"},xe={key:0,class:"more-tags"},Se={key:0,class:"pagination-section"},Ne={key:0,class:"topic-detail"},Ie={class:"detail-description"},Ue={key:0,class:"recommend-section"},Re={class:"recommend-title"},Be={class:"recommend-info"};function Ye(t,o,T,Pe,n,c){var z;const d=G,w=D("Search"),k=M,x=H,E=W,V=Q,S=X,v=A,N=Z,b=$,I=D("Trophy"),U=L,g=te,R=ee,B=se,Y=O;return i(),p("div",le,[a("div",oe,[l(v,{gutter:20},{default:s(()=>[l(d,{span:8},{default:s(()=>o[7]||(o[7]=[a("h2",{class:"page-title"},"优秀选题库",-1),a("p",{class:"page-subtitle"},"学习优秀案例，启发创新思维",-1)])),_:1}),l(d,{span:16},{default:s(()=>[a("div",ne,[l(v,{gutter:15},{default:s(()=>[l(d,{span:8},{default:s(()=>[l(x,{modelValue:n.form.title,"onUpdate:modelValue":o[0]||(o[0]=e=>n.form.title=e),placeholder:"搜索选题名称",clearable:"",onClear:c.search,onKeyup:J(c.search,["enter"])},{prefix:s(()=>[l(k,null,{default:s(()=>[l(w)]),_:1})]),_:1},8,["modelValue","onClear","onKeyup"])]),_:1}),l(d,{span:6},{default:s(()=>[l(V,{modelValue:n.form.category,"onUpdate:modelValue":o[1]||(o[1]=e=>n.form.category=e),placeholder:"选择分类",clearable:"",onChange:c.search},{default:s(()=>[(i(!0),p(f,null,y(n.categories,e=>(i(),u(E,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),l(d,{span:6},{default:s(()=>[l(V,{modelValue:n.form.year,"onUpdate:modelValue":o[2]||(o[2]=e=>n.form.year=e),placeholder:"选择年份",clearable:"",onChange:c.search},{default:s(()=>[(i(!0),p(f,null,y(n.years,e=>(i(),u(E,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),l(d,{span:4},{default:s(()=>[l(S,{type:"primary",onClick:c.search,icon:t.Search},{default:s(()=>o[8]||(o[8]=[m("搜索")])),_:1},8,["onClick","icon"])]),_:1})]),_:1})])]),_:1})]),_:1})]),a("div",ie,[l(v,{gutter:20},{default:s(()=>[l(d,{span:6},{default:s(()=>[a("div",re,[a("div",ce,r(n.total),1),o[9]||(o[9]=a("div",{class:"stat-label"},"优秀选题总数",-1))])]),_:1}),l(d,{span:6},{default:s(()=>[a("div",de,[a("div",pe,r(n.categories.length),1),o[10]||(o[10]=a("div",{class:"stat-label"},"涵盖分类",-1))])]),_:1}),l(d,{span:6},{default:s(()=>[a("div",ue,[a("div",me,r(n.years.length),1),o[11]||(o[11]=a("div",{class:"stat-label"},"年份跨度",-1))])]),_:1}),l(d,{span:6},{default:s(()=>[a("div",_e,[a("div",ge,r(n.currentYear),1),o[12]||(o[12]=a("div",{class:"stat-label"},"当前年份",-1))])]),_:1})]),_:1})]),a("div",he,[l(v,{gutter:15},{default:s(()=>[n.tableData.length===0?(i(),u(d,{key:0,span:24},{default:s(()=>[l(N,{description:"暂无优秀选题数据"})]),_:1})):_("",!0),(i(!0),p(f,null,y(n.tableData,e=>(i(),u(d,{span:6,key:e.id,style:{"margin-bottom":"20px"}},{default:s(()=>[a("div",{class:"card topic-card",onClick:h=>c.viewDetail(e)},[a("div",ye,[a("img",{src:e.imageUrl||"/src/assets/imgs/1748334301734-万物有灵 创业项目.png",alt:e.title,onError:o[3]||(o[3]=(...h)=>c.handleImageError&&c.handleImageError(...h))},null,40,ve),a("div",be,[l(b,{type:c.getCategoryType(e.category),class:"category-tag"},{default:s(()=>[m(r(e.category),1)]),_:2},1032,["type"]),a("div",Ce,r(e.year)+"年",1)])]),a("div",Te,[a("h3",ke,r(e.title),1),a("p",Ee,r(e.description),1),a("div",Ve,[a("div",ze,[l(k,{class:"award-icon"},{default:s(()=>[l(I)]),_:1}),a("span",De,r(e.awardInfo),1)]),e.tags?(i(),p("div",we,[(i(!0),p(f,null,y(e.tags.split(",").slice(0,2),(h,Fe)=>(i(),u(b,{key:h,size:"small",effect:"plain",class:"tag-item"},{default:s(()=>[m(r(h.trim()),1)]),_:2},1024))),128)),e.tags.split(",").length>2?(i(),p("span",xe," +"+r(e.tags.split(",").length-2),1)):_("",!0)])):_("",!0)])])],8,fe)]),_:2},1024))),128))]),_:1}),n.total>0?(i(),p("div",Se,[l(U,{"current-page":n.pageNum,"onUpdate:currentPage":o[4]||(o[4]=e=>n.pageNum=e),"page-size":n.pageSize,"onUpdate:pageSize":o[5]||(o[5]=e=>n.pageSize=e),"page-sizes":[8,16,24,32],small:!1,disabled:!1,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:c.handleSizeChange,onCurrentChange:c.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):_("",!0)]),l(Y,{modelValue:n.detailVisible,"onUpdate:modelValue":o[6]||(o[6]=e=>n.detailVisible=e),title:(z=n.selectedTopic)==null?void 0:z.title,width:"70%","before-close":c.handleDetailClose},{default:s(()=>[n.selectedTopic?(i(),p("div",Ne,[l(R,{column:2,border:""},{default:s(()=>[l(g,{label:"选题名称",span:2},{default:s(()=>[m(r(n.selectedTopic.title),1)]),_:1}),l(g,{label:"分类"},{default:s(()=>[l(b,{type:c.getCategoryType(n.selectedTopic.category)},{default:s(()=>[m(r(n.selectedTopic.category),1)]),_:1},8,["type"])]),_:1}),l(g,{label:"年份"},{default:s(()=>[m(r(n.selectedTopic.year)+"年 ",1)]),_:1}),l(g,{label:"获奖情况",span:2},{default:s(()=>[m(r(n.selectedTopic.awardInfo),1)]),_:1}),l(g,{label:"选题描述",span:2},{default:s(()=>[a("p",Ie,r(n.selectedTopic.description),1)]),_:1}),n.selectedTopic.tags?(i(),u(g,{key:0,label:"标签",span:2},{default:s(()=>[(i(!0),p(f,null,y(n.selectedTopic.tags.split(","),e=>(i(),u(b,{key:e,size:"small",effect:"plain",class:"tag-item"},{default:s(()=>[m(r(e.trim()),1)]),_:2},1024))),128))]),_:1})):_("",!0)]),_:1}),n.recommendTopics.length>0?(i(),p("div",Ue,[o[13]||(o[13]=a("h3",null,"相似推荐",-1)),l(v,{gutter:15},{default:s(()=>[(i(!0),p(f,null,y(n.recommendTopics,e=>(i(),u(d,{span:8,key:e.id},{default:s(()=>[l(B,{class:"recommend-card",onClick:h=>c.viewRecommend(e)},{default:s(()=>[a("div",Re,r(e.title),1),a("div",Be,[a("span",null,r(e.category),1),a("span",null,r(e.year)+"年",1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):_("",!0)])):_("",!0)]),_:1},8,["modelValue","title","before-close"])])}const et=P(ae,[["render",Ye],["__scopeId","data-v-b6a6824c"]]);export{et as default};
