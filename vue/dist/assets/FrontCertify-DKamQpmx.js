/* empty css                *//* empty css                  *//* empty css               *//* empty css               *//* empty css                 *//* empty css                     *//* empty css              */import{r as c}from"./request-CfAbx4ue.js";/* empty css                    *//* empty css                */import{r as F,O as I,c as l,a as f,b as t,w as o,K as R,h as S,o as r,n,L,z as M,Q as O,R as P,M as j,u as k,m as V,k as A,t as m,A as D,j as G,E as u}from"./index-BlySnbrc.js";const J={style:{width:"50%",margin:"0 auto",padding:"20px 0","min-height":"100vh"}},K={class:"card",style:{padding:"20px"}},Q=["src"],T=["src"],H={key:0,style:{margin:"20px 0 0 80px","font-size":"13px"}},W={key:1,style:{margin:"10px 0 20px 80px","font-size":"13px",color:"#ff9824"}},X={key:2,style:{margin:"10px 0 20px 80px","font-size":"13px",color:"#41d142"}},Y={key:3,style:{margin:"20px 0 20px 80px","font-size":"13px",color:"#f80f0f"}},Z={style:{"text-align":"center"}},ue={__name:"FrontCertify",setup($){const _="/api",e=F({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),form:{},certifyList:[],rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],cardNo:[{required:!0,message:"请输入身份证号",trigger:"blur"}],img1:[{required:!0,message:"请上传上传身份证照片",trigger:"change"}],img2:[{required:!0,message:"请上传上传工作证照片",trigger:"change"}]}}),E=a=>{e.form.img1=a.data},N=a=>{e.form.img2=a.data},g=I(),p=()=>{c.get("/certify/selectByUserId/"+e.user.id).then(a=>{e.form=a.data||{}})},U=()=>{g.value.validate(a=>{a&&c.post("/certify/add",e.form).then(s=>{s.code==="200"?(u.success("操作成功"),e.form={},p()):u.error(s.msg)})})},w=()=>{e.form.status="待审核",e.form.reason=null,c.put("/certify/update",e.form).then(a=>{a.code==="200"?(u.success("提交成功"),p()):u.error(a.msg)})},B=()=>{e.form.id?w():U()};return p(),(a,s)=>{const x=M,d=L,y=P,q=O,b=S("Plus"),h=A,v=j,z=D,C=R;return r(),l("div",J,[f("div",K,[f("div",null,[t(C,{ref_key:"formRef",ref:g,model:e.form,rules:e.rules,"label-width":"100px",style:{padding:"20px 30px"}},{default:o(()=>[t(d,{label:"姓名",prop:"name"},{default:o(()=>[t(x,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=i=>e.form.name=i),disabled:e.form.status==="审核通过",placeholder:"请输入姓名"},null,8,["modelValue","disabled"])]),_:1}),t(d,{label:"性别",prop:"gender"},{default:o(()=>[t(q,{modelValue:e.form.gender,"onUpdate:modelValue":s[1]||(s[1]=i=>e.form.gender=i),disabled:e.form.status==="审核通过"},{default:o(()=>[t(y,{label:"男",value:"男"}),t(y,{label:"女",value:"女"})]),_:1},8,["modelValue","disabled"])]),_:1}),t(d,{label:"身份证号",prop:"cardNo"},{default:o(()=>[t(x,{modelValue:e.form.cardNo,"onUpdate:modelValue":s[2]||(s[2]=i=>e.form.cardNo=i),disabled:e.form.status==="审核通过",placeholder:"请输入身份证号"},null,8,["modelValue","disabled"])]),_:1}),t(d,{label:"身份证照片",prop:"img1"},{default:o(()=>[t(v,{disabled:e.form.status==="审核通过",action:k(_)+"/files/upload","on-success":E,"show-file-list":!1,class:"avatar-uploader"},{default:o(()=>[e.form.img1?(r(),l("img",{key:0,src:e.form.img1,class:"avatar"},null,8,Q)):(r(),V(h,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[t(b)]),_:1}))]),_:1},8,["disabled","action"])]),_:1}),t(d,{label:"工作证照片",prop:"img2"},{default:o(()=>[t(v,{disabled:e.form.status==="审核通过",action:k(_)+"/files/upload","on-success":N,"show-file-list":!1,class:"avatar-uploader"},{default:o(()=>[e.form.img2?(r(),l("img",{key:0,src:e.form.img2,class:"avatar"},null,8,T)):(r(),V(h,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[t(b)]),_:1}))]),_:1},8,["disabled","action"])]),_:1}),e.form.status==="审核未通过"?(r(),l("div",H," 审核原因："+m(e.form.reason),1)):n("",!0),e.form.status==="待审核"?(r(),l("div",W,"状态："+m(e.form.status),1)):n("",!0),e.form.status==="审核通过"?(r(),l("div",X,"您的认证已"+m(e.form.status),1)):n("",!0),e.form.status==="审核未通过"?(r(),l("div",Y,"您的认证"+m(e.form.status),1)):n("",!0),f("div",Z,[t(z,{type:"primary",size:"default",onClick:B,style:{"text-align":"center",width:"200px"},disabled:e.form.status==="审核通过"},{default:o(()=>s[3]||(s[3]=[G("提交认证")])),_:1},8,["disabled"])])]),_:1},8,["model","rules"])])])])}}};export{ue as default};
