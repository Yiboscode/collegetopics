/* empty css                *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css                 *//* empty css                      *//* empty css             *//* empty css              *//* empty css             *//* empty css               *//* empty css              *//* empty css                    *//* empty css            */import{_ as de,O as h,r as P,X as ce,E as S,c as E,a as t,b as o,w as l,a3 as me,ad as ve,a7 as pe,o as r,a4 as _e,t as i,U as fe,S as ge,T as be,z as ye,ap as he,k as Ee,u as M,a8 as R,A as ke,j as b,a9 as Se,n as V,a1 as Ne,a2 as we,m as y,ai as Te,v as Ce,F as A,x as I,y as De,P as xe,ac as Ve,C as ze}from"./index-BlySnbrc.js";import{r as $}from"./request-CfAbx4ue.js";const Me={class:"my-evaluation"},Ae={class:"stats-section"},Ie={class:"stat-card"},Ye={class:"stat-number"},Ue={class:"stat-card"},Fe={class:"stat-number"},Be={class:"stat-card"},Pe={class:"stat-number"},Re={class:"stat-card"},$e={class:"stat-number"},Oe={class:"evaluations-container"},We={class:"evaluation-header"},je={class:"topic-title"},He={class:"evaluation-content"},Ke={class:"score-section"},Le={class:"scores"},qe={class:"score-item"},Xe={class:"score-item"},Ge={class:"score-item"},Je={class:"total-score"},Qe={class:"score-value"},Ze={class:"info-section"},et={class:"info-item"},tt={class:"info-item"},at={class:"info-item"},st={key:0,class:"comments-section"},ot={class:"comments-text"},lt={class:"evaluation-actions"},nt={class:"evaluations-container"},it={class:"evaluation-header"},rt={class:"topic-title"},ut={class:"total-score"},dt={class:"score-value"},ct={class:"evaluation-content"},mt={class:"innovation-scores"},vt={class:"innovation-score-item"},pt={class:"score-name"},_t={class:"score-value"},ft={key:0,class:"comments-section"},gt={class:"comments-text"},bt={class:"evaluation-actions"},yt={key:0,class:"pagination-section"},ht={__name:"MyEvaluation",setup(Et){const O=pe(),D=h("topic"),d=h(null),v=P({evaluationType:"",keyword:""}),c=h([]),m=h([]),u=P({totalEvaluations:0,averageScore:0,thisWeekEvaluations:0,thisMonthEvaluations:0}),_=h(0),f=h(1),N=h(10);ce(()=>{g(),H()});const g=()=>{D.value==="topic"?W():j()},W=()=>{const a={pageNum:f.value,pageSize:N.value};d.value&&d.value.length===2&&(a.startDate=d.value[0],a.endDate=d.value[1]),v.keyword&&(a.keyword=v.keyword),$.get("/topicEvaluation/my",{params:a}).then(e=>{if(e.code==="200"){const n=e.data||{};if(c.value=n.records||n.list||[],_.value=n.total||c.value.length,c.value.length>0){u.totalEvaluations=c.value.length;const p=c.value.reduce((w,k)=>w+(Number(k.totalScore)||0),0);u.averageScore=c.value.length>0?(p/c.value.length).toFixed(1):0}}else S.error(e.msg||"加载选题评价失败"),c.value=[],_.value=0}).catch(e=>{console.error("加载选题评价失败:",e),S.error("加载选题评价失败"),c.value=[],_.value=0})},j=()=>{const a={pageNum:f.value,pageSize:N.value};d.value&&d.value.length===2&&(a.startDate=d.value[0],a.endDate=d.value[1]),v.keyword&&(a.keyword=v.keyword),$.get("/innovationEvaluation/my",{params:a}).then(e=>{if(e.code==="200"){const n=e.data||{};if(m.value=n.records||n.list||[],_.value=n.total||m.value.length,m.value.length>0){u.totalEvaluations=m.value.length;const p=m.value.reduce((w,k)=>w+(Number(k.totalScore)||0),0);u.averageScore=m.value.length>0?(p/m.value.length).toFixed(1):0}}else S.error(e.msg||"加载创新能力评价失败"),m.value=[],_.value=0}).catch(e=>{console.error("加载创新能力评价失败:",e),S.error("加载创新能力评价失败"),m.value=[],_.value=0})},H=()=>{u.totalEvaluations=0,u.averageScore=0,u.thisWeekEvaluations=0,u.thisMonthEvaluations=0},K=a=>{D.value=a,f.value=1,g()},L=()=>{f.value=1,g()},q=a=>{N.value=a,g()},X=a=>{f.value=a,g()},G=()=>{d.value=null,v.evaluationType="",v.keyword="",f.value=1,g()},J=a=>({已提交:"success",评价中:"warning",已完成:"success",草稿:"info"})[a]||"info",Q=a=>a?[{name:"求知欲",value:Number(a.knowledgeSeeking)||0},{name:"加工能力",value:Number(a.processingAbility)||0},{name:"理解能力",value:Number(a.understandingAbility)||0},{name:"自学能力",value:Number(a.selfLearningAbility)||0},{name:"创新欲望",value:Number(a.innovationDesire)||0},{name:"创新兴趣",value:Number(a.innovationInterest)||0},{name:"创新动机",value:Number(a.innovationMotivation)||0},{name:"创新精神",value:Number(a.innovationSpirit)||0},{name:"合作能力",value:Number(a.cooperationAbility)||0},{name:"动手能力",value:Number(a.handsOnAbility)||0},{name:"表达能力",value:Number(a.expressionAbility)||0},{name:"研究能力",value:Number(a.researchAbility)||0}]:[],Z=a=>{if(!a.evaluationTime)return!1;const e=new Date(a.evaluationTime);return(new Date-e)/(1e3*60*60)<24},ee=a=>{a&&O.push(`/front/topicDetail/${a}`)},te=a=>{S.info("编辑功能开发中...")},ae=a=>{S.info("编辑功能开发中...")};return(a,e)=>{const n=_e,p=me,w=fe,k=be,se=ge,oe=Ee,le=ye,T=ke,x=ve,Y=Te,ne=xe,z=Ve,U=De,F=Ce,B=we,ie=Ne,re=ze;return r(),E("div",Me,[e[27]||(e[27]=t("div",{class:"header-section"},[t("h2",{class:"page-title"},"我的评价记录"),t("p",{class:"page-subtitle"},"查看我提交的所有评价信息")],-1)),t("div",Ae,[o(p,{gutter:20},{default:l(()=>[o(n,{span:6},{default:l(()=>[t("div",Ie,[t("div",Ye,i(u.totalEvaluations),1),e[6]||(e[6]=t("div",{class:"stat-label"},"评价总数",-1))])]),_:1}),o(n,{span:6},{default:l(()=>[t("div",Ue,[t("div",Fe,i(u.averageScore),1),e[7]||(e[7]=t("div",{class:"stat-label"},"平均评分",-1))])]),_:1}),o(n,{span:6},{default:l(()=>[t("div",Be,[t("div",Pe,i(u.thisWeekEvaluations),1),e[8]||(e[8]=t("div",{class:"stat-label"},"本周评价",-1))])]),_:1}),o(n,{span:6},{default:l(()=>[t("div",Re,[t("div",$e,i(u.thisMonthEvaluations),1),e[9]||(e[9]=t("div",{class:"stat-label"},"本月评价",-1))])]),_:1})]),_:1})]),o(x,{class:"filter-card"},{default:l(()=>[o(p,{gutter:20,align:"middle"},{default:l(()=>[o(n,{span:6},{default:l(()=>[o(w,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:L},null,8,["modelValue"])]),_:1}),o(n,{span:4},{default:l(()=>[o(se,{modelValue:v.evaluationType,"onUpdate:modelValue":e[1]||(e[1]=s=>v.evaluationType=s),placeholder:"评价类型",clearable:""},{default:l(()=>[o(k,{label:"选题评价",value:"topic"}),o(k,{label:"创新能力评价",value:"innovation"})]),_:1},8,["modelValue"])]),_:1}),o(n,{span:6},{default:l(()=>[o(le,{modelValue:v.keyword,"onUpdate:modelValue":e[2]||(e[2]=s=>v.keyword=s),placeholder:"搜索选题标题或学生姓名",clearable:"",onKeyup:he(g,["enter"])},{suffix:l(()=>[o(oe,{class:"el-input__icon"},{default:l(()=>[o(M(R))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(n,{span:8},{default:l(()=>[o(T,{type:"primary",onClick:g,icon:M(R)},{default:l(()=>e[10]||(e[10]=[b("搜索")])),_:1},8,["icon"]),o(T,{onClick:G,icon:M(Se)},{default:l(()=>e[11]||(e[11]=[b("重置")])),_:1},8,["icon"])]),_:1})]),_:1})]),_:1}),o(x,{class:"content-card"},{default:l(()=>[o(ie,{modelValue:D.value,"onUpdate:modelValue":e[3]||(e[3]=s=>D.value=s),onTabChange:K},{default:l(()=>[o(B,{label:"选题评价",name:"topic"},{default:l(()=>[t("div",Oe,[c.value.length===0?(r(),y(Y,{key:0,description:"暂无选题评价记录"})):(r(),y(F,{key:1},{default:l(()=>[(r(!0),E(A,null,I(c.value,s=>(r(),y(U,{key:s.id,timestamp:s.evaluationTime,placement:"top"},{default:l(()=>[o(x,{class:"evaluation-card"},{default:l(()=>[t("div",We,[t("h4",je,i(s.topicTitle),1),o(ne,{type:J(s.status),effect:"light"},{default:l(()=>[b(i(s.status),1)]),_:2},1032,["type"])]),t("div",He,[o(p,{gutter:20},{default:l(()=>[o(n,{span:12},{default:l(()=>[t("div",Ke,[e[16]||(e[16]=t("h5",null,"评分详情",-1)),t("div",Le,[t("div",qe,[e[12]||(e[12]=t("span",{class:"score-label"},"创新性：",-1)),o(z,{"model-value":Number(s.innovationScore)||0,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}分"},null,8,["model-value"])]),t("div",Xe,[e[13]||(e[13]=t("span",{class:"score-label"},"可行性：",-1)),o(z,{"model-value":Number(s.feasibilityScore)||0,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}分"},null,8,["model-value"])]),t("div",Ge,[e[14]||(e[14]=t("span",{class:"score-label"},"意义性：",-1)),o(z,{"model-value":Number(s.significanceScore)||0,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}分"},null,8,["model-value"])])]),t("div",Je,[e[15]||(e[15]=b(" 总分：")),t("span",Qe,i(s.totalScore)+"/15",1)])])]),_:2},1024),o(n,{span:12},{default:l(()=>[t("div",Ze,[e[20]||(e[20]=t("h5",null,"基本信息",-1)),t("div",et,[e[17]||(e[17]=t("span",{class:"info-label"},"学生：",-1)),t("span",null,i(s.studentName),1)]),t("div",tt,[e[18]||(e[18]=t("span",{class:"info-label"},"评价人：",-1)),t("span",null,i(s.evaluatorName),1)]),t("div",at,[e[19]||(e[19]=t("span",{class:"info-label"},"评价时间：",-1)),t("span",null,i(s.evaluationTime),1)])])]),_:2},1024)]),_:2},1024),s.suggestions?(r(),E("div",st,[e[21]||(e[21]=t("h5",null,"评价意见",-1)),t("p",ot,i(s.suggestions),1)])):V("",!0)]),t("div",lt,[o(T,{size:"small",onClick:C=>ee(s.topicId)},{default:l(()=>e[22]||(e[22]=[b(" 查看选题 ")])),_:2},1032,["onClick"]),Z(s)?(r(),y(T,{key:0,size:"small",type:"primary",onClick:C=>te(s)},{default:l(()=>e[23]||(e[23]=[b(" 修改评价 ")])),_:2},1032,["onClick"])):V("",!0)])]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1}))])]),_:1}),o(B,{label:"创新能力评价",name:"innovation"},{default:l(()=>[t("div",nt,[m.value.length===0?(r(),y(Y,{key:0,description:"暂无创新能力评价记录"})):(r(),y(F,{key:1},{default:l(()=>[(r(!0),E(A,null,I(m.value,s=>(r(),y(U,{key:s.id,timestamp:s.evaluationTime,placement:"top"},{default:l(()=>[o(x,{class:"evaluation-card"},{default:l(()=>[t("div",it,[t("h4",rt,i(s.studentName)+" - 创新能力评价",1),t("div",ut,[e[24]||(e[24]=b(" 总分：")),t("span",dt,i(s.totalScore)+"/60",1)])]),t("div",ct,[t("div",mt,[o(p,{gutter:15},{default:l(()=>[(r(!0),E(A,null,I(Q(s),(C,ue)=>(r(),y(n,{span:6,key:ue},{default:l(()=>[t("div",vt,[t("div",pt,i(C.name),1),t("div",_t,i(C.value)+"/5",1)])]),_:2},1024))),128))]),_:2},1024)]),s.comments?(r(),E("div",ft,[e[25]||(e[25]=t("h5",null,"评价意见",-1)),t("p",gt,i(s.comments),1)])):V("",!0)]),t("div",bt,[o(T,{size:"small",type:"primary",onClick:C=>ae(s)},{default:l(()=>e[26]||(e[26]=[b(" 修改评价 ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1}))])]),_:1})]),_:1},8,["modelValue"]),_.value>0?(r(),E("div",yt,[o(re,{"current-page":f.value,"onUpdate:currentPage":e[4]||(e[4]=s=>f.value=s),"page-size":N.value,"onUpdate:pageSize":e[5]||(e[5]=s=>N.value=s),"page-sizes":[10,20,50,100],small:!1,disabled:!1,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:_.value,onSizeChange:q,onCurrentChange:X},null,8,["current-page","page-size","total"])])):V("",!0)]),_:1})])}}},Bt=de(ht,[["__scopeId","data-v-6584c033"]]);export{Bt as default};
